<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeless Blue - 3D Logo Transitions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: #000;
            font-family: 'Arial', sans-serif;
            color: white;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .logo-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .logo {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            color: transparent;
            background: linear-gradient(135deg, #1a237e, #283593, #3949ab, #5c6bc0);
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 0 0 15px rgba(66, 133, 244, 0.7);
            letter-spacing: 0.2em;
            line-height: 1.4;
        }
        
        .logo-subtitle {
            font-size: 1.2rem;
            margin-top: 0.5rem;
            color: #bbdefb;
            letter-spacing: 0.3em;
            text-align: center;
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: flex;
            gap: 15px;
        }
        
        button {
            background: rgba(30, 30, 70, 0.7);
            border: 1px solid #3949ab;
            color: #e8eaf6;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            letter-spacing: 0.1em;
        }
        
        button:hover {
            background: rgba(57, 73, 171, 0.5);
            box-shadow: 0 0 15px rgba(57, 73, 171, 0.7);
        }
        
        .scene-info {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(10, 15, 40, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            border-left: 3px solid #5c6bc0;
        }
        
        .day-night-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(10, 15, 40, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            border-left: 3px solid #ff9800;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <div class="logo-container" id="logo-container">
        <div class="logo">Timeless Blue</div>
        <div class="logo-subtitle">藍 月 芬 華</div>
    </div>
    
    <div class="scene-info">
        <div id="scene-name">Forest Glade</div>
        <div id="transition-status">Transitioning...</div>
    </div>
    
    <div class="day-night-indicator">
        <div id="time-of-day">Day</div>
        <div id="cycle-speed">Speed: 2x</div>
    </div>
    
    <div class="controls">
        <button id="prev-scene">Previous Scene</button>
        <button id="next-scene">Next Scene</button>
        <button id="random-scene">Random Scene</button>
        <button id="speed-up">Increase Speed</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Scene setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Lighting setup
        const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(5, 10, 7);
        scene.add(directionalLight);
        
        // Day/Night cycle parameters
        let dayNightCycle = 0;
        let cycleSpeed = 0.002;
        let isDay = true;
        
        // Scene management
        const scenes = [
            { 
                name: "Forest Glade", 
                color: 0x2e7d32, 
                particleColor: 0x4caf50,
                objects: []
            },
            { 
                name: "Ocean Depths", 
                color: 0x01579b, 
                particleColor: 0x29b6f6,
                objects: []
            },
            { 
                name: "Mountain Peak", 
                color: 0x37474f, 
                particleColor: 0x78909c,
                objects: []
            },
            { 
                name: "Desert Dunes", 
                color: 0xf57c00, 
                particleColor: 0xffb74d,
                objects: []
            },
            { 
                name: "Crystal Cavern", 
                color: 0x6a1b9a, 
                particleColor: 0xab47bc,
                objects: []
            }
        ];
        
        let currentSceneIndex = 0;
        let isTransitioning = false;
        let transitionProgress = 0;
        let transitionDirection = 1;
        
        // Particle system for transitions
        const particleCount = 1000;
        const particles = new THREE.BufferGeometry();
        const particlePositions = new Float32Array(particleCount * 3);
        const particleColors = new Float32Array(particleCount * 3);
        
        for (let i = 0; i < particleCount * 3; i += 3) {
            particlePositions[i] = (Math.random() - 0.5) * 100;
            particlePositions[i + 1] = (Math.random() - 0.5) * 100;
            particlePositions[i + 2] = (Math.random() - 0.5) * 100;
            
            // Initial colors based on current scene
            const color = new THREE.Color(scenes[currentSceneIndex].particleColor);
            particleColors[i] = color.r;
            particleColors[i + 1] = color.g;
            particleColors[i + 2] = color.b;
        }
        
        particles.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
        particles.setAttribute('color', new THREE.BufferAttribute(particleColors, 3));
        
        const particleMaterial = new THREE.PointsMaterial({
            size: 0.5,
            vertexColors: true,
            transparent: true,
            opacity: 0.8
        });
        
        const particleSystem = new THREE.Points(particles, particleMaterial);
        scene.add(particleSystem);
        
        // 3D Logo setup
        const logoGroup = new THREE.Group();
        scene.add(logoGroup);
        
        // Create text geometry for the logo
        const loader = new THREE.FontLoader();
        let logoText1, logoText2;
        
        // Create simple 3D text as fallback
        const createTextGeometry = (text, size, height) => {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 512;
            canvas.height = 256;
            
            context.fillStyle = '#ffffff';
            context.font = 'Bold 120px Arial';
            context.textAlign = 'center';
            context.textBaseline = 'middle';
            context.fillText(text, canvas.width/2, canvas.height/2);
            
            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.MeshBasicMaterial({ 
                map: texture, 
                transparent: true,
                side: THREE.DoubleSide
            });
            
            const geometry = new THREE.PlaneGeometry(size, size/2, 1, 1);
            const mesh = new THREE.Mesh(geometry, material);
            
            return mesh;
        };
        
        // Create logo elements
        logoText1 = createTextGeometry("Timeless Blue", 10, 1);
        logoText2 = createTextGeometry("藍 月 芬 華", 6, 1);
        
        logoText2.position.y = -2;
        
        logoGroup.add(logoText1);
        logoGroup.add(logoText2);
        
        // Position logo initially off-screen
        logoGroup.position.z = -20;
        logoGroup.visible = false;
        
        // Add some decorative elements to the logo
        const ringGeometry = new THREE.TorusGeometry(6, 0.2, 16, 100);
        const ringMaterial = new THREE.MeshBasicMaterial({ 
            color: 0x5c6bc0, 
            transparent: true, 
            opacity: 0.7 
        });
        const ring = new THREE.Mesh(ringGeometry, ringMaterial);
        ring.rotation.x = Math.PI / 2;
        logoGroup.add(ring);
        
        // Camera position
        camera.position.z = 15;
        
        // Animation variables
        let logoAnimationProgress = 0;
        let logoAnimationDirection = 1;
        let logoVisible = false;
        
        // UI Elements
        const sceneNameElement = document.getElementById('scene-name');
        const transitionStatusElement = document.getElementById('transition-status');
        const timeOfDayElement = document.getElementById('time-of-day');
        const cycleSpeedElement = document.getElementById('cycle-speed');
        const logoContainer = document.getElementById('logo-container');
        
        // Scene transition function
        function transitionToScene(newSceneIndex) {
            if (isTransitioning || newSceneIndex === currentSceneIndex) return;
            
            isTransitioning = true;
            transitionProgress = 0;
            transitionDirection = 1;
            
            // Show logo during transition
            logoGroup.visible = true;
            logoAnimationProgress = 0;
            logoAnimationDirection = 1;
            logoVisible = true;
            
            // Update UI
            transitionStatusElement.textContent = "Transitioning...";
            logoContainer.style.opacity = "1";
            
            // Animate particles to form new scene
            const targetScene = scenes[newSceneIndex];
            const targetColor = new THREE.Color(targetScene.particleColor);
            
            // Update particle target colors
            for (let i = 0; i < particleCount * 3; i += 3) {
                particleColors[i] = targetColor.r;
                particleColors[i + 1] = targetColor.g;
                particleColors[i + 2] = targetColor.b;
            }
            particles.attributes.color.needsUpdate = true;
            
            // Change scene after transition
            setTimeout(() => {
                currentSceneIndex = newSceneIndex;
                sceneNameElement.textContent = scenes[currentSceneIndex].name;
                
                // Hide logo after transition
                setTimeout(() => {
                    logoAnimationDirection = -1;
                    setTimeout(() => {
                        logoGroup.visible = false;
                        logoVisible = false;
                        logoContainer.style.opacity = "0";
                    }, 1000);
                }, 1000);
            }, 1500);
        }
        
        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            // Day/Night cycle
            dayNightCycle += cycleSpeed;
            if (dayNightCycle > Math.PI * 2) dayNightCycle = 0;
            
            // Update lighting based on day/night cycle
            const dayIntensity = Math.sin(dayNightCycle) * 0.5 + 0.5;
            directionalLight.intensity = dayIntensity;
            
            // Change ambient color based on time of day
            const hue = 0.6 + (Math.sin(dayNightCycle) * 0.1);
            const saturation = 0.5 + (Math.sin(dayNightCycle) * 0.3);
            const lightness = 0.3 + (Math.sin(dayNightCycle) * 0.2);
            
            const ambientColor = new THREE.Color().setHSL(hue, saturation, lightness);
            ambientLight.color = ambientColor;
            
            // Update day/night indicator
            isDay = dayIntensity > 0.5;
            timeOfDayElement.textContent = isDay ? "Day" : "Night";
            timeOfDayElement.style.color = isDay ? "#ffa000" : "#5c6bc0";
            
            // Handle scene transitions
            if (isTransitioning) {
                transitionProgress += 0.02 * transitionDirection;
                
                if (transitionProgress >= 1) {
                    transitionProgress = 1;
                    setTimeout(() => {
                        transitionDirection = -1;
                    }, 500);
                } else if (transitionProgress <= 0 && transitionDirection === -1) {
                    transitionProgress = 0;
                    isTransitioning = false;
                    transitionStatusElement.textContent = "Stable";
                }
                
                // Animate particles during transition
                const positions = particles.attributes.position.array;
                const originalPositions = [...positions];
                
                for (let i = 0; i < particleCount * 3; i += 3) {
                    // Create swirling motion
                    const angle = transitionProgress * Math.PI * 2 + i * 0.01;
                    const radius = 5 + (i % 10) * 0.5;
                    
                    positions[i] = originalPositions[i] + Math.cos(angle) * radius * transitionProgress;
                    positions[i + 1] = originalPositions[i + 1] + Math.sin(angle) * radius * transitionProgress;
                    positions[i + 2] = originalPositions[i + 2] + Math.sin(angle) * radius * transitionProgress * 0.5;
                }
                
                particles.attributes.position.needsUpdate = true;
            }
            
            // Logo animation during transitions
            if (logoVisible) {
                logoAnimationProgress += 0.02 * logoAnimationDirection;
                
                if (logoAnimationProgress > 1) logoAnimationProgress = 1;
                if (logoAnimationProgress < 0) logoAnimationProgress = 0;
                
                // Float and spin animation
                const floatOffset = Math.sin(Date.now() * 0.002) * 0.5;
                logoGroup.position.y = floatOffset;
                
                // Balanced spinning
                logoGroup.rotation.y = logoAnimationProgress * Math.PI * 2;
                logoGroup.rotation.x = Math.sin(Date.now() * 0.001) * 0.1;
                
                // Scale animation
                const scale = 0.5 + logoAnimationProgress * 0.5;
                logoGroup.scale.set(scale, scale, scale);
                
                // Laser-like appearance
                const opacity = logoAnimationProgress;
                logoText1.material.opacity = opacity;
                logoText2.material.opacity = opacity;
                ring.material.opacity = opacity * 0.7;
                
                // Position adjustment
                logoGroup.position.z = -10 + logoAnimationProgress * 5;
            }
            
            // Rotate particle system
            particleSystem.rotation.y += 0.002;
            particleSystem.rotation.x += 0.001;
            
            renderer.render(scene, camera);
        }
        
        // Event listeners for controls
        document.getElementById('next-scene').addEventListener('click', () => {
            const nextIndex = (currentSceneIndex + 1) % scenes.length;
            transitionToScene(nextIndex);
        });
        
        document.getElementById('prev-scene').addEventListener('click', () => {
            const prevIndex = (currentSceneIndex - 1 + scenes.length) % scenes.length;
            transitionToScene(prevIndex);
        });
        
        document.getElementById('random-scene').addEventListener('click', () => {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * scenes.length);
            } while (newIndex === currentSceneIndex && scenes.length > 1);
            
            transitionToScene(newIndex);
        });
        
        document.getElementById('speed-up').addEventListener('click', () => {
            cycleSpeed *= 1.5;
            if (cycleSpeed > 0.02) cycleSpeed = 0.002; // Reset if too fast
            
            const speedMultiplier = Math.round(cycleSpeed / 0.002);
            cycleSpeedElement.textContent = `Speed: ${speedMultiplier}x`;
        });
        
        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // Initialize
        sceneNameElement.textContent = scenes[currentSceneIndex].name;
        transitionStatusElement.textContent = "Stable";
        
        // Start animation
        animate();
        
        // Auto-transition every 10 seconds
        setInterval(() => {
            if (!isTransitioning) {
                const nextIndex = (currentSceneIndex + 1) % scenes.length;
                transitionToScene(nextIndex);
            }
        }, 10000);
    </script>
</body>
</html>
